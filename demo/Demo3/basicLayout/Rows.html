<!DOCTYPE html PUBLIC"-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="../drag_and_drop.js"></script>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>D&amp;D Demo</title>

<style>
#external {
	margin: 10px;
	margin-left: 0px;
	border: 1px solid #aaaaaa;
	height: auto;
}

#external, .draggable_item, .div_to_drop {
	float: left;
	width: 354px;
}

.draggable_item, .div_to_drop {
	height: 50px;
}

.draggable_item {
	cursor: move;
	background-color: #BEC8E3;
	text-align: center;
}

.draggable_item span {
	line-height: 50px;
	display: inline-block;
	vertical-align: middle;
}

#small_cont2, #small_cont3, #small_cont4, #small_cont5 {
	border-top: 1px dashed white;
}
</style>
<script type="text/javascript">

  function getElementsStartsWithId(id) {
  var children = document.body.getElementsByTagName('div');
  var elements = [], child;
  for (var i = 0, length = children.length; i < length; i++) {
    child = children[i];
    if (child.id.substr(0, id.length) == id)
      elements.push(child);
  }
  return elements;
}

  function prepareEnvironment() {

    var currentDivCont = "";
    var currentDivDrag = "";

    var DraggableDivNumber = getElementsStartsWithId('draggable_item').length;

    for (var i = 1; i <= DraggableDivNumber; i++) {

      currentDivCont = divContTemplateId;
      currentDivCont += i;
      var small_cont = document.getElementById(currentDivCont);
      small_cont.addEventListener("drop", function(event) {
        drop(event, this);
      });
      small_cont.addEventListener("dragover", function(event) {
        allowDrop(event, this);
      });

      currentDivDrag = divDragTemplateId;
      currentDivDrag += i;
      var draggable_item = document.getElementById(currentDivDrag);
      draggable_item.draggable = true;
      draggable_item.addEventListener("dragstart", function(event) {
        drag(event);
      });
      draggable_item.addEventListener("dragend", function(event) {
        dragEnd();
      });

    }

  }

  window.onload = prepareEnvironment;

    </script>
</head>

<body>

	<div id="external">
		<div id="small_cont1" class="div_to_drop">
			<div id="draggable_item1" class="draggable_item">
				<span>&#x21c5; Item 1 &#x21c5;</span>
			</div>
		</div>
		<div id="small_cont2" class="div_to_drop">
			<div id="draggable_item2" class="draggable_item">
				<span>&#x21c5; Item 2 &#x21c5;</span>
			</div>
		</div>
		<div id="small_cont3" class="div_to_drop">
			<div id="draggable_item3" class="draggable_item">
				<span>&#x21c5; Item 3 &#x21c5;</span>
			</div>
		</div>
		<div id="small_cont4" class="div_to_drop">
			<div id="draggable_item4" class="draggable_item">
				<span>&#x21c5; Item 4 &#x21c5;</span>
			</div>
		</div>
		<div id="small_cont5" class="div_to_drop">
			<div id="draggable_item5" class="draggable_item">
				<span>&#x21c5; Item 5 &#x21c5;</span>
			</div>
		</div>
	</div>

</body>
</html>
